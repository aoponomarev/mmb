# План_Backend_Core.md

> Категория: План миграции Backend/Core Data
> Статус: Черновик
> Источники: `A_CORE_DATA_LOGIC.md`, backend/process/integrations навыки MBB

---

## 1. Контекст и границы

Контур охватывает перенос серверной логики, сервисов и data-пайплайнов из MBB в MMB.
Не включает UI (см. `План_Frontend_UI.md`) и docker-рантайм (см. `План_Infrastructure_Docker.md`).

## 2. Цели / Non-goals

**Цели:**
- восстановить минимально необходимое backend-ядро;
- убрать MBB-специфику и хардкод путей;
- обеспечить совместимость с `paths.js`, `.env`, MCP-правилами.

**Non-goals:**
- перенос всего legacy-кода «как есть»;
- оптимизация производительности до появления стабильного feature-scope.

## 3. Почему этот подход

- **Почему инкрементально:** снижает риск крупных регрессий и держит миграцию проверяемой.
- **Почему сначала data-contracts:** UI и интеграции зависят от стабильных API/данных.
- **Почему «SSOT-first»:** backend должен сразу жить в новых границах `paths.js` и secret-policy.

## 4. Альтернативы

- Полный big-bang перенос backend за один этап — отклонено (слишком высокий риск расхождений).
- Полный rewrite с нуля — отклонено (дорого по времени без подтвержденной необходимости).

## 5. Зависимости

- Upstream: `План_Infrastructure_Docker.md`, `План_Control_Plane.md`, `План_Skills_MCP.md`
- Downstream: `План_Frontend_UI.md`, `План_Integrations_n8n.md`, `План_Monitoring.md`

## 6. Риски и снижение

- Риск скрытых зависимостей на legacy-пути -> статический аудит импортов перед переносом.
- Риск data-drift -> контрактные smoke-тесты на ключевые endpoints.
- Риск путаницы терминов -> применять anti-calque правило и `SSOT/ЕИП`-контракты.

## 7. Definition of Done

- Есть минимальный backend-контур, запускаемый локально.
- Все path/env зависимости проходят `env:check` и `ssot:check`.
- Для перенесенных модулей добавлены skill anchors.
- Обновлены: `План_MBB_to_MMB.md`, `План_Migration_Sync.md`.

## 8. Чек-лист

- [ ] Инвентаризация backend-модулей MBB и приоритизация.
- [ ] Определение MVP backend для MMB.
- [ ] Перенос core services + адаптация импорта путей.
- [ ] Контрактные тесты API и data-flow smoke checks.
- [ ] Синхронизация статусов в master/migration документах.
