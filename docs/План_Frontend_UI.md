> Категория: План миграции контура Frontend & UI
> Статус: Черновик
> Источники MBB: `A_FRONTEND_CORE.md`, `components-*`, `ux-*`

---

## 1. Контекст из MBB

Старый фронтенд MBB был построен по архитектуре **"No-Build"**:
- **Стек:** Нативные ES Modules (импорты прямо в браузере), Vue 3 Reactivity (через `core/state/ui-state.js`).
- **Сборка:** Отсутствовала (без Webpack/Vite). Проект запускался простым открытием `index.html` через протокол `file://`.
- **Загрузка:** Собственный загрузчик модулей (`core/module-loader.js`) с топологической сортировкой графа зависимостей (DAG).
- **Компоненты:** Нарезаны на `cmp-*` (общие UI), `app-*` (специфичные), `cell-*` (для таблиц). Шаблоны грузились через `x-template`.
- **UX и SSOT:** Тексты, иконки и тултипы строго централизовались (напр. `tooltips-config.js`).

## 2. Архитектурные парадигмы в MMB

При переносе фронтенда в MMB мы **сохраняем** философию легковесности (возможность работы из `file://`), но **ужесточаем** контракты SSOT с помощью backend-практик.

### Киллер-фичи (Очередь на внедрение)

1. **AST-Линтер против хардкода текстов (Hardcode Ban)**
   - Внедрить ESLint-правило (аналогичное запрету `process.env`), которое запретит агентам и разработчикам писать русские и английские тексты напрямую в компонентах (например, `button.innerText = 'Save'`).
   - Весь текст должен идти через вызов словаря: `uiDictionary.buttons.save`.

2. **Zod-валидация UI-конфигов (Type Safe Design System)**
   - Тултипы, списки иконок и модалки в MBB были простыми JS-объектами. В MMB они будут проверяться Zod-схемой при инициализации.
   - *Fail Fast:* Если в конфигурации иконок прописан `btc.png`, а на диске его нет — UI сразу выбросит понятную ошибку в консоль, а не покажет сломанную картинку.

3. **Inverted SSOT (Docs from Code) для Дизайн-Системы**
   - Скрипт `generate-ui-docs.js` будет парсить JS-словари (цвета, тексты, иконки) и генерировать Markdown-документ `docs/design-tokens-reference.md`.

## 3. План работ (Чек-лист)

- [ ] **Шаг 1: Фундамент загрузчика**
  - Перенести `module-loader.js` и настроить базовый `index.html`.
  - Заменить устаревшие пути на использование нового `paths.js` (если применимо в браузере) или настроить Cloudflare/локальный прокси для отдачи файлов.
- [ ] **Шаг 2: Глобальный State (Vue 3 Reactivity)**
  - Перенести `ui-state.js` и очистить его от MBB-специфичного мусора (вроде специфичных стейтов старого кэша).
- [ ] **Шаг 3: Дизайн-система и SSOT словари**
  - Внедрить Zod-схемы для `tooltips-config.js` и `modals-config.js`.
  - Добавить AST-линтер на хардкод текстов в компонентах.
- [ ] **Шаг 4: Базовые UI-компоненты (`cmp-*`)**
  - Перенести кнопки, модалки, селекты. Применить строгие правила изоляции компонентов.
- [ ] **Шаг 5: Специфичные компоненты приложения (`app-*`)**
  - По мере готовности Backend-слоя (см. План Backend & Data), переносить бизнес-компоненты.
